<!-- Content Header (Page header) -->
<section class="content-header">
  <h1>
    Update Content Exam
    <!-- <small>Control panel</small> -->
  </h1>
  <ol class="breadcrumb">
    <li>
      <a routerLink="/"><i class="fa fa-dashboard"></i> Home</a>
    </li>
    <li class="active" [routerLink]="['/exam']">Exam</li>
    <li class="active" [routerLink]="['/exam', detailExam?.examId, 'update']">
      Update
    </li>
    <li class="active">UpdateContent</li>
  </ol>
</section>

<section class="content">
  <div class="row">
    <div class="box box-solid">
      <div class="box-header">
        <i class="fa fa-bar-chart-o"></i>
        <h3 class="box-title">Common Information</h3>
      </div>
      <!-- /.box-header -->
      <div class="box-body">
        <div class="row">
          <h2 class="text-center exam-tit text-uppercase">
            {{ detailExam?.title }}
          </h2>
          <div class="col-xs-6 col-md-6 pd-3">
            <div class="col-xs-3 pull-left">Exam Category:</div>
            <div class="col-xs-3">
              {{ detailExam?.category?.categoryName }}
            </div>
          </div>
          <div class="col-xs-6 col-md-6 pd-5">
            <div class="col-xs-3 pull-left">Status:</div>
            <div class="col-xs-3">{{ detailExam?.status }}</div>
          </div>
          <div class="col-xs-6 col-md-6 pd-3">
            <div class="col-xs-3 pull-left">Number Question:</div>
            <div class="col-xs-3">{{ detailExam?.numberOfQuestion }}</div>
          </div>
          <div class="col-xs-6 col-md-6 pd-5">
            <div class="col-xs-3 pull-left">Duration:</div>
            <div class="col-xs-3">{{ detailExam?.duration }} minute</div>
          </div>
          <div class="col-xs-6 col-md-6"></div>
          <div class="col-xs-6 col-md-6 pd-5">
            <div class="col-xs-3 pull-left">Note:</div>
            <div class="col-xs-3">{{ detailExam?.note }}</div>
          </div>
        </div>
        <br />
        <div class="text-center"><h4 class="text-aqua">Exam Content</h4></div>
        <div class="row">
          <div class="nav-tabs-custom">
            <ul class="nav nav-tabs">
              <li [ngClass]="{ active: inTabOne === true }">
                <a
                  href="#tab_1"
                  data-toggle="tab"
                  aria-expanded="false"
                  (click)="changeTabOne()"
                  >List question of exam</a
                >
              </li>
              <li [ngClass]="{ active: inTabOne === false }">
                <a
                  href="#tab_2"
                  data-toggle="tab"
                  aria-expanded="true"
                  (click)="changeTabTwo()"
                  >List all question</a
                >
              </li>
            </ul>
            <div class="tab-content">
              <div
                class="tab-pane"
                id="tab_1"
                [ngClass]="{ active: inTabOne === true }"
              >
                <div class="box-body">
                  <div
                    id="example1_wrapper"
                    class="dataTables_wrapper form-inline dt-bootstrap"
                  >
                    <div class="row">
                      <div class="col-sm-4">
                        <div class="dataTables_length" id="example1_length">
                          <label
                            >Show
                            <select
                              class="form-control input-sm"
                              (change)="changePageSizeTabOne($event.target)"
                            >
                              <option value="5">5</option>
                              <option value="10">10</option>
                              <option value="15">15</option>
                              <option value="30">30</option>
                            </select>
                            entries
                          </label>
                        </div>
                      </div>
                      <div class="col-sm-8 mb-3 ">
                        <button
                          class="btn btn-success btn-random pull-right"
                          data-toggle="modal"
                          data-target="#modal-approve"
                        >
                          Random
                        </button>
                        <div
                          class="modal modal-info fade in"
                          id="modal-approve"
                          style="display: none;"
                        >
                          <div class="modal-dialog">
                            <div class="modal-content">
                              <div class="modal-header">
                                <button
                                  type="button"
                                  class="close"
                                  data-dismiss="modal"
                                  aria-label="Close"
                                >
                                  <span aria-hidden="true">Ã—</span>
                                </button>
                                <h4 class="modal-title">Confirm Random</h4>
                              </div>
                              <div class="modal-body">
                                <p>
                                  Do you sure Random questions for this exam?
                                </p>
                              </div>
                              <div class="modal-footer text-black">
                                <button
                                  type="button"
                                  class="btn btn-outline pull-left"
                                  data-dismiss="modal"
                                >
                                  Cancel
                                </button>
                                <button
                                  type="button"
                                  class="btn btn-outline"
                                  data-dismiss="modal"
                                  (click)="clickRandom()"
                                >
                                  OK
                                </button>
                              </div>
                            </div>
                            <!-- /.modal-content -->
                          </div>
                          <!-- /.modal-dialog -->
                        </div>
                      </div>
                    </div>
                    <div class="clearfix"></div>
                    <br/>
                    <br/>
                    <div class="row">
                      <div class="col-sm-12">
                        <table
                          class="table table-bordered table-striped"
                        >
                          <thead>
                            <tr role="row" class="text-center">
                              <th style="width: 10px;">No</th>
                              <th style="width: 210.6px;">Question content</th>
                              <th style="width: 268.2px;">Option one</th>
                              <th style="width: 245.8px;">Option two</th>
                              <th style="width: 183.4px;">Option three</th>
                              <th style="width: 135.6px;">Option four</th>
                              <th style="width: 30px;"></th>
                            </tr>
                          </thead>
                          <tbody
                            *ngFor=" let examQuestion of detailExam?.examQuestions; index as i"
                          >
                            <ng-template
                              [ngIf]="i <(tabListQuestionInExam.currentPage + 1) * tabListQuestionInExam.sizeOfPage &&
                                i >= tabListQuestionInExam.currentPage *
                                    tabListQuestionInExam.sizeOfPage
                              "
                            >
                              <tr role="row" class="odd">
                                <td>{{ i + 1 }}</td>
                                <td>{{ examQuestion.question.content }}</td>
                                <ng-template ngFor let-i [ngForOf]=" examQuestion.choiceOrder.split(' ')">
                                  <td [ngClass]="{ 'text-red': examQuestion.question.answers[i - 1] .true === true }"                                 >
                                    {{ examQuestion.question.answers[i - 1].content }}
                                  </td>
                                </ng-template>
                                <td>
                                  <a
                                    data-toggle="modal"
                                    (click)="
                                      removeQuestion($event, examQuestion.id)
                                    "
                                    >X</a
                                  >
                                </td>
                              </tr>
                            </ng-template>
                          </tbody>
                        </table>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-sm-5">
                        <div
                          class="dataTables_info"
                          id="example1_info"
                          role="status"
                          aria-live="polite"
                        >
                          Showing
                          {{
                            tabListQuestionInExam?.currentPage *
                              tabListQuestionInExam?.sizeOfPage +
                              1
                          }}
                          to
                          {{
                            (tabListQuestionInExam?.currentPage + 1) *
                              tabListQuestionInExam?.sizeOfPage <
                            tabListQuestionInExam?.entities
                              ? (tabListQuestionInExam?.currentPage + 1) *
                                tabListQuestionInExam?.sizeOfPage
                              : tabListQuestionInExam?.entities
                          }}
                          of {{ tabListQuestionInExam?.entities }} entries
                        </div>
                      </div>
                      <div class="col-sm-7">
                        <div
                          class="dataTables_paginate paging_simple_numbers"
                          id="example1_paginate"
                        >
                          <ul class="pagination">
                            <li
                              class="paginate_button previous"
                              id="example1_previous"
                              [ngClass]="{
                                disabled:
                                  tabListQuestionInExam?.currentPage === 0
                              }"
                            >
                              <ng-template
                                [ngIf]="
                                  tabListQuestionInExam?.currentPage > 0 &&
                                  tabListQuestionInExam?.entities > 0
                                "
                              >
                                <a (click)="previousPageTabOne()">Previous</a>
                              </ng-template>
                              <ng-template
                                [ngIf]="
                                  tabListQuestionInExam?.currentPage === 0 &&
                                  tabListQuestionInExam?.entities > 0
                                "
                              >
                                <a>Previous</a>
                              </ng-template>
                            </li>
                            <li class="paginate_button active">
                              <a href="#">{{
                                tabListQuestionInExam?.currentPage + 1
                              }}</a>
                            </li>
                            <li
                              class="paginate_button next"
                              id="example1_next"
                              [ngClass]="{
                                disabled:
                                  (tabListQuestionInExam?.currentPage + 1) *
                                    tabListQuestionInExam?.sizeOfPage >=
                                  tabListQuestionInExam?.entities
                              }"
                            >
                              <ng-template
                                [ngIf]="
                                  (tabListQuestionInExam?.currentPage + 1) *
                                    tabListQuestionInExam?.sizeOfPage >=
                                  tabListQuestionInExam?.entities
                                "
                              >
                                <a>Next</a>
                              </ng-template>
                              <ng-template
                                [ngIf]="
                                  (tabListQuestionInExam?.currentPage + 1) *
                                    tabListQuestionInExam?.sizeOfPage <
                                  tabListQuestionInExam?.entities
                                "
                              >
                                <a (click)="nextPageTabOne()">Next</a>
                              </ng-template>
                            </li>
                          </ul>
                        </div>
                      </div>
                    </div>
                    <ng-template [ngIf]="isRemove === true">
                      <div class="row text-center">
                        <div class="col-xs-2"></div>
                        <div class="col-xs-2"></div>
                        <div class="col-xs-1"></div>
                        <button
                          class="btn btn-primary col-xs-1 mr-3"
                          (click)="clickUpdate()"
                        >
                          Submit
                        </button>
                        <button
                          class="btn btn-default col-xs-1"
                          (click)="clickResetRemoveQuestion()"
                        >
                          Reset
                        </button>
                        <div class="col-xs-1"></div>
                        <div class="col-xs-2"></div>
                        <div class="col-xs-2"></div>
                      </div>
                    </ng-template>
                  </div>
                </div>
              </div>
              <!-- /.tab-pane -->
              <div
                class="tab-pane"
                id="tab_2"
                [ngClass]="{ active: inTabOne === false }"
              >
                <app-tab-question></app-tab-question>
              </div>
            </div>
            <!-- /.tab-content -->
          </div>
        </div>
      </div>
      <!-- /.box-body -->
    </div>
  </div>
</section>
